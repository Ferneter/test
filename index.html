<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#991b1b">
    <title>Apex Legends Quiz</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide icons as inline SVG
        const Shuffle = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/>
            </svg>
        );

        const Target = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="6"/>
                <circle cx="12" cy="12" r="2"/>
            </svg>
        );

        const Trophy = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                <path d="M4 22h16"/>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
            </svg>
        );

        const RotateCcw = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                <path d="M3 3v5h5"/>
            </svg>
        );

        const ApexLegendsQuiz = () => {
            const legends = [
                {
                    name: "Bloodhound",
                    tactical: "Reveals enemies, traps, and tracks through structures",
                    passive: "Sees tracks left behind by enemies",
                    ultimate: "Increases movement speed and highlights enemies",
                    class: "Recon"
                },
                {
                    name: "Gibraltar",
                    tactical: "Creates a protective dome that blocks gunfire",
                    passive: "Has a gun shield when aiming that absorbs damage",
                    ultimate: "Calls in defensive bombardment missiles",
                    class: "Support"
                },
                {
                    name: "Lifeline",
                    tactical: "Deploys a drone that heals nearby allies",
                    passive: "Revives teammates with a drone and shield",
                    ultimate: "Calls in a care package with equipment",
                    class: "Support"
                },
                {
                    name: "Pathfinder",
                    tactical: "Fires a grappling hook to reach distant locations",
                    passive: "Scans survey beacons to reveal the next ring location",
                    ultimate: "Creates a zipline for team movement",
                    class: "Skirmisher"
                },
                {
                    name: "Wraith",
                    tactical: "Enters the void where she's invisible and invulnerable",
                    passive: "Hears voices warning of danger",
                    ultimate: "Creates a portal connecting two locations",
                    class: "Skirmisher"
                },
                {
                    name: "Bangalore",
                    tactical: "Fires a smoke canister",
                    passive: "Runs faster when shot at or near gunfire",
                    ultimate: "Calls in an artillery strike with delayed explosions",
                    class: "Assault"
                },
                {
                    name: "Caustic",
                    tactical: "Places traps that release toxic gas",
                    passive: "Sees enemies through his toxic gas",
                    ultimate: "Throws a grenade releasing a large gas area",
                    class: "Controller"
                },
                {
                    name: "Mirage",
                    tactical: "Sends out a decoy hologram",
                    passive: "Becomes invisible when reviving or knocked down",
                    ultimate: "Creates a group of holograms around himself",
                    class: "Support"
                },
                {
                    name: "Octane",
                    tactical: "Sacrifices health for increased speed",
                    passive: "Automatically regenerates health over time",
                    ultimate: "Places a jump pad",
                    class: "Skirmisher"
                },
                {
                    name: "Wattson",
                    tactical: "Places electric nodes that create fences",
                    passive: "Shields recharge faster, ultimate charges from accelerants",
                    ultimate: "Builds a pylon that destroys grenades and charges shields",
                    class: "Controller"
                },
                {
                    name: "Crypto",
                    tactical: "Controls a surveillance drone",
                    passive: "Drone detects enemies within range of the team",
                    ultimate: "Drone releases an EMP damaging shields and devices",
                    class: "Recon"
                },
                {
                    name: "Revenant",
                    tactical: "Throws a device that damages and disables abilities",
                    passive: "Climbs walls and crouches faster",
                    ultimate: "Places a totem that returns players after knockdown",
                    class: "Skirmisher"
                },
                {
                    name: "Loba",
                    tactical: "Teleports by throwing her bracelet",
                    passive: "Sees epic and legendary loot through walls",
                    ultimate: "Places a device allowing loot collection from the area",
                    class: "Support"
                },
                {
                    name: "Rampart",
                    tactical: "Builds a wall that amplifies outgoing shots and blocks incoming",
                    passive: "Has larger magazine and faster reload with LMGs",
                    ultimate: "Deploys and uses a mobile minigun Sheila",
                    class: "Controller"
                },
                {
                    name: "Horizon",
                    tactical: "Creates a gravity lift that lifts players",
                    passive: "Has better air control and landing impact",
                    ultimate: "Creates a micro black hole that pulls in objects",
                    class: "Skirmisher"
                },
                {
                    name: "Fuse",
                    tactical: "Fires an explosive cluster grenade",
                    passive: "Throws grenades farther and faster, carries more grenades",
                    ultimate: "Fires a ring of flames surrounding an area",
                    class: "Assault"
                },
                {
                    name: "Valkyrie",
                    tactical: "Fires a swarm of missiles",
                    passive: "Flies using a jetpack",
                    ultimate: "Takes off with the team into the air for repositioning",
                    class: "Skirmisher"
                },
                {
                    name: "Seer",
                    tactical: "Releases micro-drones that reveal, damage, and interrupt",
                    passive: "Hears and sees the heartbeat of nearby enemies",
                    ultimate: "Creates a sphere revealing moving enemies",
                    class: "Recon"
                },
                {
                    name: "Ash",
                    tactical: "Throws a trap that tethers enemies",
                    passive: "Sees death boxes and killer locations",
                    ultimate: "Creates a one-way portal",
                    class: "Assault"
                },
                {
                    name: "Mad Maggie",
                    tactical: "Fires a drill that burns through obstacles",
                    passive: "Highlights enemies she shoots, moves faster with shotguns",
                    ultimate: "Releases a wrecking ball offering temporary speed boost",
                    class: "Assault"
                },
                {
                    name: "Newcastle",
                    tactical: "Throws a mobile shield that can be repositioned",
                    passive: "Drags teammates while reviving and protects them with a shield",
                    ultimate: "Leaps to a position creating fortified walls",
                    class: "Support"
                },
                {
                    name: "Vantage",
                    tactical: "Commands Echo the bat to reposition",
                    passive: "Aims at long range showing enemy information",
                    ultimate: "Uses a custom sniper marking enemies for the team",
                    class: "Recon"
                },
                {
                    name: "Catalyst",
                    tactical: "Throws ferrofluid creating a slowing and damaging area",
                    passive: "Reinforces doors and can build new ones",
                    ultimate: "Creates a ferrofluid wall blocking vision",
                    class: "Controller"
                },
                {
                    name: "Ballistic",
                    tactical: "Programs a third weapon that fires smart bullets",
                    passive: "Pulls out a sling, carries an extra weapon",
                    ultimate: "Overclocks himself and the team with infinite ammo",
                    class: "Assault"
                },
                {
                    name: "Conduit",
                    tactical: "Transfers shields to teammates",
                    passive: "Runs faster toward teammates with low shields",
                    ultimate: "Creates an energy shield that regenerates shields",
                    class: "Support"
                },
                {
                    name: "Alter",
                    tactical: "Creates a void portal you can shoot through",
                    passive: "Restores shields after using void portals",
                    ultimate: "Creates a void nexus for team repositioning",
                    class: "Skirmisher"
                }
            ];

            const [gameMode, setGameMode] = useState('menu');
            const [currentQuestion, setCurrentQuestion] = useState(null);
            const [score, setScore] = useState(0);
            const [questionsAnswered, setQuestionsAnswered] = useState(0);
            const [feedback, setFeedback] = useState('');
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [usedLegends, setUsedLegends] = useState([]);

            const generateQuestion = () => {
                const availableLegends = legends.filter(l => !usedLegends.includes(l.name));
                
                if (availableLegends.length === 0) {
                    setUsedLegends([]);
                    return generateQuestion();
                }

                const legend = availableLegends[Math.floor(Math.random() * availableLegends.length)];
                const questionTypes = ['tactical', 'passive', 'ultimate', 'name'];
                const questionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];
                
                let question = '';
                let correctAnswer = '';
                let answers = [];

                if (questionType === 'name') {
                    const abilityTypes = ['tactical', 'passive', 'ultimate'];
                    const abilityType = abilityTypes[Math.floor(Math.random() * abilityTypes.length)];
                    const abilityName = legend[abilityType];
                    
                    question = `Which legend has this ${abilityType === 'tactical' ? 'tactical' : abilityType === 'passive' ? 'passive' : 'ultimate'} ability: "${abilityName}"?`;
                    correctAnswer = legend.name;
                    
                    const otherLegends = legends.filter(l => l.name !== legend.name);
                    const wrongAnswers = [];
                    while (wrongAnswers.length < 3) {
                        const randomLegend = otherLegends[Math.floor(Math.random() * otherLegends.length)];
                        if (!wrongAnswers.includes(randomLegend.name)) {
                            wrongAnswers.push(randomLegend.name);
                        }
                    }
                    answers = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);
                } else {
                    question = `What is ${legend.name}'s ${questionType === 'tactical' ? 'tactical' : questionType === 'passive' ? 'passive' : 'ultimate'} ability?`;
                    correctAnswer = legend[questionType];
                    
                    const sameTypeAbilities = legends
                        .filter(l => l.name !== legend.name)
                        .map(l => l[questionType]);
                    
                    const wrongAnswers = [];
                    while (wrongAnswers.length < 3) {
                        const randomAbility = sameTypeAbilities[Math.floor(Math.random() * sameTypeAbilities.length)];
                        if (!wrongAnswers.includes(randomAbility) && randomAbility !== correctAnswer) {
                            wrongAnswers.push(randomAbility);
                        }
                    }
                    answers = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);
                }

                setCurrentQuestion({ question, correctAnswer, answers, legend: legend.name });
                setUsedLegends([...usedLegends, legend.name]);
                setFeedback('');
                setSelectedAnswer(null);
            };

            const handleAnswer = (answer) => {
                setSelectedAnswer(answer);
                if (answer === currentQuestion.correctAnswer) {
                    setScore(score + 1);
                    setFeedback('‚úì Correct!');
                } else {
                    setFeedback(`‚úó Wrong! Correct answer: ${currentQuestion.correctAnswer}`);
                }
                setQuestionsAnswered(questionsAnswered + 1);

                setTimeout(() => {
                    if (questionsAnswered + 1 >= 10 && gameMode === 'quick') {
                        setGameMode('results');
                    } else {
                        generateQuestion();
                    }
                }, 2000);
            };

            const startGame = (mode) => {
                setGameMode(mode);
                setScore(0);
                setQuestionsAnswered(0);
                setUsedLegends([]);
                generateQuestion();
            };

            const resetGame = () => {
                setGameMode('menu');
                setScore(0);
                setQuestionsAnswered(0);
                setUsedLegends([]);
                setCurrentQuestion(null);
            };

            if (gameMode === 'menu') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-red-900 to-slate-900 flex items-center justify-center p-4">
                        <div className="max-w-2xl w-full bg-slate-800 rounded-2xl shadow-2xl p-8 border-2 border-red-600">
                            <div className="text-center mb-8">
                                <h1 className="text-5xl font-bold text-red-500 mb-2">APEX LEGENDS</h1>
                                <h2 className="text-2xl text-slate-300">Abilities Quiz</h2>
                            </div>
                            
                            <div className="space-y-4">
                                <button
                                    onClick={() => startGame('quick')}
                                    className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-6 px-8 rounded-xl flex items-center justify-between transition-all transform hover:scale-105"
                                >
                                    <Target />
                                    <span className="text-xl">Quick Mode (10 Questions)</span>
                                    <div className="w-8" />
                                </button>
                                
                                <button
                                    onClick={() => startGame('endless')}
                                    className="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-6 px-8 rounded-xl flex items-center justify-between transition-all transform hover:scale-105"
                                >
                                    <Shuffle />
                                    <span className="text-xl">Endless Mode</span>
                                    <div className="w-8" />
                                </button>
                            </div>

                            <div className="mt-8 text-center text-slate-400">
                                <p>Test your knowledge of all legends and their abilities!</p>
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameMode === 'results') {
                const percentage = Math.round((score / 10) * 100);
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-red-900 to-slate-900 flex items-center justify-center p-4">
                        <div className="max-w-2xl w-full bg-slate-800 rounded-2xl shadow-2xl p-8 border-2 border-red-600">
                            <div className="text-center mb-8">
                                <Trophy />
                                <h1 className="text-4xl font-bold text-red-500 mb-2">Game Over!</h1>
                                <h2 className="text-6xl font-bold text-white mb-4">{score}/10</h2>
                                <p className="text-2xl text-slate-300">{percentage}% accuracy</p>
                            </div>

                            <div className="mb-8">
                                <div className="bg-slate-700 rounded-full h-6 overflow-hidden">
                                    <div 
                                        className="bg-gradient-to-r from-red-600 to-yellow-500 h-full transition-all duration-1000"
                                        style={{ width: `${percentage}%` }}
                                    />
                                </div>
                            </div>

                            <div className="text-center mb-8">
                                {percentage >= 80 && <p className="text-xl text-green-400">üèÜ Excellent! You're an Apex Legends expert!</p>}
                                {percentage >= 60 && percentage < 80 && <p className="text-xl text-yellow-400">üëç Good job! A few things to review.</p>}
                                {percentage < 60 && <p className="text-xl text-orange-400">üí™ Try again, you'll do better!</p>}
                            </div>

                            <button
                                onClick={resetGame}
                                className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-8 rounded-xl flex items-center justify-center gap-3 transition-all transform hover:scale-105"
                            >
                                <RotateCcw />
                                <span className="text-xl">Play Again</span>
                            </button>
                        </div>
                    </div>
                );
            }

            if (!currentQuestion) return null;

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-red-900 to-slate-900 flex items-center justify-center p-4">
                    <div className="max-w-3xl w-full bg-slate-800 rounded-2xl shadow-2xl p-8 border-2 border-red-600">
                        <div className="flex justify-between items-center mb-6">
                            <div className="text-white">
                                <span className="text-lg font-bold">Score: {score}</span>
                                {gameMode === 'quick' && <span className="text-slate-400 ml-4">Question {questionsAnswered + 1}/10</span>}
                                {gameMode === 'endless' && <span className="text-slate-400 ml-4">Questions: {questionsAnswered}</span>}
                            </div>
                            <button
                                onClick={resetGame}
                                className="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-all"
                            >
                                Menu
                            </button>
                        </div>

                        <div className="mb-8">
                            <h2 className="text-2xl font-bold text-white mb-6">{currentQuestion.question}</h2>
                            
                            <div className="space-y-3">
                                {currentQuestion.answers.map((answer, index) => (
                                    <button
                                        key={index}
                                        onClick={() => !selectedAnswer && handleAnswer(answer)}
                                        disabled={!!selectedAnswer}
                                        className={`w-full p-4 rounded-xl text-left text-lg font-medium transition-all transform hover:scale-102 ${
                                            !selectedAnswer
                                                ? 'bg-slate-700 hover:bg-slate-600 text-white'
                                                : answer === currentQuestion.correctAnswer
                                                ? 'bg-green-600 text-white'
                                                : answer === selectedAnswer
                                                ? 'bg-red-600 text-white'
                                                : 'bg-slate-700 text-slate-400'
                                        }`}
                                    >
                                        {answer}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {feedback && (
                            <div className={`text-center text-xl font-bold p-4 rounded-lg ${
                                feedback.includes('Correct') ? 'bg-green-600/20 text-green-400' : 'bg-red-600/20 text-red-400'
                            }`}>
                                {feedback}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ApexLegendsQuiz />);

        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
